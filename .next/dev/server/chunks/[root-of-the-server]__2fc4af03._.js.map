{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Ashvatth/OneDrive/Desktop/AshWorks/clones/team-eta/app/auth/me/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { cookies } from \"next/headers\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport pkg from \"pg\";\r\n\r\nconst { Pool } = pkg;\r\nconst pool = new Pool({ connectionString: process.env.DATABASE_URL });\r\n\r\nexport async function GET() {\r\n  try {\r\n    const cookieStore = await cookies();\r\n    const token = cookieStore.get(\"session\")?.value;\r\n    if (!token) return NextResponse.json({ user: null });\r\n    const decoded: any = jwt.verify(\r\n      token,\r\n      process.env.JWT_SECRET || \"dev-secret\"\r\n    );\r\n    const resDb = await pool.query(\r\n      \"SELECT id,name,email,mobile FROM users WHERE id = $1\",\r\n      [decoded.userId]\r\n    );\r\n    return NextResponse.json({ user: resDb.rows[0] || null });\r\n  } catch (err) {\r\n    return NextResponse.json({ user: null });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;;;;;AAEA,MAAM,EAAE,IAAI,EAAE,GAAG,+GAAG;AACpB,MAAM,OAAO,IAAI,KAAK;IAAE,kBAAkB,QAAQ,GAAG,CAAC,YAAY;AAAC;AAE5D,eAAe;IACpB,IAAI;QACF,MAAM,cAAc,MAAM,IAAA,wMAAO;QACjC,MAAM,QAAQ,YAAY,GAAG,CAAC,YAAY;QAC1C,IAAI,CAAC,OAAO,OAAO,4MAAY,CAAC,IAAI,CAAC;YAAE,MAAM;QAAK;QAClD,MAAM,UAAe,8MAAG,CAAC,MAAM,CAC7B,OACA,QAAQ,GAAG,CAAC,UAAU,IAAI;QAE5B,MAAM,QAAQ,MAAM,KAAK,KAAK,CAC5B,wDACA;YAAC,QAAQ,MAAM;SAAC;QAElB,OAAO,4MAAY,CAAC,IAAI,CAAC;YAAE,MAAM,MAAM,IAAI,CAAC,EAAE,IAAI;QAAK;IACzD,EAAE,OAAO,KAAK;QACZ,OAAO,4MAAY,CAAC,IAAI,CAAC;YAAE,MAAM;QAAK;IACxC;AACF"}}]
}
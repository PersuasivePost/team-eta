{"version":3,"sources":["../../../../../../../../../OneDrive/Desktop/AshWorks/clones/team-eta/app/auth/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport default function AuthPage() {\r\n  const [page, setPage] = useState<\"login\" | \"signup\">(\"login\");\r\n\r\n  useEffect(() => {\r\n    // lucide is available globally in the original template; try to initialize if present\r\n    try {\r\n      // @ts-ignore\r\n      window.lucide?.createIcons?.();\r\n    } catch (e) {\r\n      // ignore\r\n    }\r\n  }, []);\r\n\r\n  const showPage = (p: \"login\" | \"signup\") => {\r\n    setPage(p);\r\n    document.title = p === \"login\" ? \"Login\" : \"Create Account\";\r\n  };\r\n\r\n  const handleGoogle = async () => {\r\n    // Simulate a successful Google login via Zoogle for frontend-only flow\r\n    const fakeUser: {\r\n      id: string;\r\n      name: string;\r\n      email: string;\r\n      mobile?: string | null;\r\n    } = {\r\n      id: \"user_123\",\r\n      name: \"Zoogle User\",\r\n      email: \"user@example.com\",\r\n      mobile: window.localStorage.getItem(\"zoogle:mobile\") || null,\r\n    };\r\n\r\n    // If mobile is missing, prompt user (simple prompt for demo)\r\n    if (!fakeUser.mobile) {\r\n      const m = window.prompt(\"Please enter your mobile number (required)\");\r\n      if (!m) {\r\n        alert(\"Mobile number is required to continue\");\r\n        return;\r\n      }\r\n      fakeUser.mobile = m;\r\n      window.localStorage.setItem(\"zoogle:mobile\", m);\r\n    }\r\n\r\n    // store locally\r\n    window.localStorage.setItem(\"zoogle:user\", JSON.stringify(fakeUser));\r\n\r\n    // Call server API to upsert into Supabase\r\n    try {\r\n      const res = await fetch(\"/api/auth/upsert-user\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          name: fakeUser.name,\r\n          email: fakeUser.email,\r\n          mobile: fakeUser.mobile,\r\n        }),\r\n      });\r\n      const data = await res.json();\r\n      if (!res.ok) {\r\n        console.error(\"Upsert failed\", data);\r\n        // continue client-side anyway\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Upsert error\", err);\r\n    }\r\n\r\n    // redirect back to next if present\r\n    const params = new URLSearchParams(window.location.search);\r\n    const next = params.get(\"next\") || \"/\";\r\n    window.location.href = next;\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <div className=\"min-h-screen bg-linear-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4\">\r\n        <div className=\"max-w-md w-full\">\r\n          <div className=\"text-center mb-8\">\r\n            <div className=\"inline-flex items-center justify-center w-16 h-16 bg-linear-to-br from-blue-600 to-purple-600 rounded-2xl mb-4 shadow-lg\">\r\n              <i data-lucide=\"shield\" className=\"w-8 h-8 text-white\"></i>\r\n            </div>\r\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\r\n              {page === \"login\" ? \"Welcome Back\" : \"Create Account\"}\r\n            </h1>\r\n            <p className=\"text-gray-600\">\r\n              {page === \"login\"\r\n                ? \"Sign in to continue to your account\"\r\n                : \"Get started in seconds with Google\"}\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-2xl shadow-xl p-8 space-y-6\">\r\n            <button\r\n              onClick={handleGoogle}\r\n              className={`w-full flex items-center justify-center gap-3 ${\r\n                page === \"login\"\r\n                  ? \"bg-white border-2 border-gray-200 text-gray-700\"\r\n                  : \"bg-linear-to-r from-blue-600 to-purple-600 text-white\"\r\n              } rounded-xl px-6 py-4 font-semibold transition-all duration-200 shadow-sm group`}\r\n            >\r\n              <svg className=\"w-6 h-6\" viewBox=\"0 0 24 24\">\r\n                <path\r\n                  fill=\"#4285F4\"\r\n                  d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"\r\n                />\r\n                <path\r\n                  fill=\"#34A853\"\r\n                  d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"\r\n                />\r\n                <path\r\n                  fill=\"#FBBC05\"\r\n                  d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"\r\n                />\r\n                <path\r\n                  fill=\"#EA4335\"\r\n                  d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"\r\n                />\r\n              </svg>\r\n              <span>\r\n                {page === \"login\"\r\n                  ? \"Continue with Google\"\r\n                  : \"Sign up with Google\"}\r\n              </span>\r\n              <i\r\n                data-lucide=\"arrow-right\"\r\n                className=\"w-5 h-5 ml-auto group-hover:translate-x-1 transition-transform\"\r\n              ></i>\r\n            </button>\r\n\r\n            {page === \"login\" ? (\r\n              <div className=\"relative\">\r\n                <div className=\"absolute inset-0 flex items-center\">\r\n                  <div className=\"w-full border-t border-gray-200\"></div>\r\n                </div>\r\n                <div className=\"relative flex justify-center text-sm\">\r\n                  <span className=\"px-4 bg-white text-gray-500\">\r\n                    Secure authentication powered by{\" \"}\r\n                    <a href=\"https://github.com/PersuasivePost/zoogle\">\r\n                      Zoogle\r\n                    </a>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-3 pt-4\">\r\n                <div className=\"flex items-start gap-3\">\r\n                  <div className=\"w-5 h-5 rounded-full bg-green-100 flex items-center justify-center shrink-0 mt-0.5\">\r\n                    <svg\r\n                      className=\"w-3 h-3 text-green-600\"\r\n                      fill=\"none\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      stroke=\"currentColor\"\r\n                    >\r\n                      <path\r\n                        strokeLinecap=\"round\"\r\n                        strokeLinejoin=\"round\"\r\n                        strokeWidth=\"3\"\r\n                        d=\"M5 13l4 4L19 7\"\r\n                      />\r\n                    </svg>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900\">\r\n                      No password needed\r\n                    </p>\r\n                    <p className=\"text-sm text-gray-600\">\r\n                      Sign in securely with your Google account\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-start gap-3\">\r\n                  <div className=\"w-5 h-5 rounded-full bg-green-100 flex items-center justify-center shrink-0 mt-0.5\">\r\n                    <svg\r\n                      className=\"w-3 h-3 text-green-600\"\r\n                      fill=\"none\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      stroke=\"currentColor\"\r\n                    >\r\n                      <path\r\n                        strokeLinecap=\"round\"\r\n                        strokeLinejoin=\"round\"\r\n                        strokeWidth=\"3\"\r\n                        d=\"M5 13l4 4L19 7\"\r\n                      />\r\n                    </svg>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900\">Quick setup</p>\r\n                    <p className=\"text-sm text-gray-600\">\r\n                      Get started in under 2 minutes\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-start gap-3\">\r\n                  <div className=\"w-5 h-5 rounded-full bg-green-100 flex items-center justify-center shrink-0 mt-0.5\">\r\n                    <svg\r\n                      className=\"w-3 h-3 text-green-600\"\r\n                      fill=\"none\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      stroke=\"currentColor\"\r\n                    >\r\n                      <path\r\n                        strokeLinecap=\"round\"\r\n                        strokeLinejoin=\"round\"\r\n                        strokeWidth=\"3\"\r\n                        d=\"M5 13l4 4L19 7\"\r\n                      />\r\n                    </svg>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900\">Always secure</p>\r\n                    <p className=\"text-sm text-gray-600\">\r\n                      Protected by OAuth 2.0 standards\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"text-center mt-6\">\r\n            <p className=\"text-gray-600\">\r\n              {page === \"login\" ? (\r\n                <>\r\n                  Don't have an account?{\" \"}\r\n                  <button\r\n                    onClick={() => showPage(\"signup\")}\r\n                    className=\"font-semibold text-blue-600\"\r\n                  >\r\n                    Sign up\r\n                  </button>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  Already have an account?{\" \"}\r\n                  <button\r\n                    onClick={() => showPage(\"login\")}\r\n                    className=\"font-semibold text-purple-600\"\r\n                  >\r\n                    Sign in\r\n                  </button>\r\n                </>\r\n              )}\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"text-center mt-8 text-sm text-gray-500\">\r\n            <p>\r\n              {page === \"login\"\r\n                ? \"Protected by Google OAuth 2.0\"\r\n                : \"Powered by Zoogle ðŸš€\"}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}